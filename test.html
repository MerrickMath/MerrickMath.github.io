<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coordinate Dash</title>
  <style>
    :root {
      --bg: #f9fafb;
      --panel: #ffffff;
      --muted: #4b5563;
      --text: #1f2937;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --card: #f3f4f6;
      --radius: 16px;
      --button-bg: #3b82f6;
      --button-bg-hover: #2563eb;
      --button-text: #ffffff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial;
      background: var(--bg);
      color: var(--text);
    }
    .container { max-width: 900px; margin: 32px auto; padding: 0 16px; }

    header {
      background: var(--panel);
      border: 1px solid #e5e7eb;
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    header h1 { margin: 0 0 4px 0; font-size: 26px; }
    header p { margin: 0; color: var(--muted); }

    .heading-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      margin-top: 12px;
    }
    .control label { display:block; font-size: 12px; margin-bottom: 4px; color: var(--muted); }
    .control input, .control select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      background: #fff;
      color: var(--text);
    }
    .control button, .primary {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: none;
      background: var(--button-bg);
      color: var(--button-text);
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s;
    }
    .control button:hover, .primary:hover {
      background: var(--button-bg-hover);
    }

    .timer { border: 1px solid #000; padding: 6px 10px; border-radius: 6px; text-align: center; font-variant-numeric: tabular-nums; }
    .timer-controls { display:flex; align-items:center; gap:8px; justify-content:flex-end; }

    .panel { background: var(--panel); border: 1px solid #e5e7eb; border-radius: var(--radius); padding: 16px; margin-top: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
    .panel h2 { margin-top: 0; }
    .list { display: grid; gap: 12px; }
    .card { background: var(--card); border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px; }
    .step-head { display: flex; justify-content: space-between; align-items: center; }
    .answer { margin-top: 8px; color: var(--button-bg); font-weight: 600; display:none; }
    canvas { border:1px solid #ccc; background:#fff; margin-top:10px; }
  .viz-wrap{margin-top:10px}
    svg.viz{background:#ffffff;border:1px solid #e5e7eb;border-radius:8px;max-width:100%;height:auto}
    .grid line{stroke:#e5e7eb;stroke-width:1}
    .axis line{stroke:#9ca3af;stroke-width:2}
    .point{fill:var(--button-bg);stroke:#111827;stroke-width:1.5}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>Coordinate Dash</h1>
    <p class="muted">Math with Mr. Merrick</p>
    <div class="heading-controls">
      <div class="control">
        <label for="stepsInput">Number of steps</label>
        <select id="stepsInput"><option>4</option><option selected>6</option><option>8</option><option>10</option></select>
      </div>
      <div class="control">
        <label for="boundInput">Coordinate bound</label>
        <select id="boundInput"><option>8</option><option selected>10</option><option>12</option><option>15</option></select>
      </div>
      <div class="control">
        <label for="seedInput">Seed</label>
        <input id="seedInput" type="text" placeholder="e.g. 12345 or any text" />
      </div>
      <div class="control">
        <label>&nbsp;</label>
        <button class="primary" id="generateBtn">Generate</button>
      </div>
    </div>
    <div class="timer-controls" style="margin-top:12px;">
      <span class="timer" id="timer">00:00</span>
      <button class="primary" id="toggleTimerBtn">Pause</button>
      <button class="primary" id="resetBtn">Reset</button>
    </div>
  </header>

  <section class="panel">
    <h2>Transformations</h2>
    <div id="answers" class="list"></div>
  </section>

  <section class="panel">
    <h2>Transformer Explainer</h2>
    <p>This section shows examples of how transformations affect the point (1,1):</p>
    <canvas id="tfCanvas" width="400" height="400"></canvas>
  </section>

  <!-- Visual Transformer / Explainer -->
  <section class="panel">
    <h2>Transformer Explainer</h2>
    <div class="viz-wrap">
      <svg id="tfSvg" class="viz" viewBox="0 0 440 440" width="100%" height="340" aria-label="coordinate grid">
        <g class="grid" id="tfGrid"></g>
        <g class="axis" id="tfAxes"></g>
        <g id="tfLayer">
          <circle id="tfDot" class="point" cx="0" cy="0" r="5"></circle>
        </g>
      </svg>
    </div>
    <div class="heading-controls" style="margin-top:12px; grid-template-columns: repeat(auto-fit,minmax(160px,1fr));">
      <div class="control">
        <label for="tfMag">Translate magnitude</label>
        <select id="tfMag"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
      </div>
      <div class="control">
        <label>&nbsp;</label>
        <div style="display:flex;gap:8px">
          <button class="primary" id="tfUp">Up</button>
          <button class="primary" id="tfDown">Down</button>
          <button class="primary" id="tfLeft">Left</button>
          <button class="primary" id="tfRight">Right</button>
        </div>
      </div>
      <div class="control">
        <label>Reflect</label>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="primary" id="tfReflectX">Over x-axis</button>
          <button class="primary" id="tfReflectY">Over y-axis</button>
        </div>
      </div>
      <div class="control">
        <label>Reflect over x = a / y = b</label>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <span>x =</span><input id="tfXVal" type="number" value="0" style="max-width:90px" />
          <button class="primary" id="tfReflectXLine">Reflect</button>
          <span style="margin-left:12px">y =</span><input id="tfYVal" type="number" value="0" style="max-width:90px" />
          <button class="primary" id="tfReflectYLine">Reflect</button>
        </div>
      </div>
      <div class="control">
        <label>Rotate 90° about pivot</label>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <span>pivot (</span><input id="tfPivotX" type="number" value="0" style="max-width:90px" /><span>,</span>
          <input id="tfPivotY" type="number" value="0" style="max-width:90px" /><span>)</span>
          <button class="primary" id="tfRotCCW">↺ CCW</button>
          <button class="primary" id="tfRotCW">↻ CW</button>
        </div>
      </div>
      <div class="control">
        <label>&nbsp;</label>
        <button class="primary" id="tfReset">Reset to (1, 1)</button>
      </div>
    </div>
  </section>
</div>

<script>
function drawGrid(ctx, width, height, step=20) {
  ctx.strokeStyle = '#eee';
  for(let x=0;x<=width;x+=step){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,height); ctx.stroke(); }
  for(let y=0;y<=height;y+=step){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(width,y); ctx.stroke(); }
  ctx.strokeStyle = '#999';
  ctx.beginPath(); ctx.moveTo(width/2,0); ctx.lineTo(width/2,height); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(0,height/2); ctx.lineTo(width,height/2); ctx.stroke();
}
function drawPoint(ctx,x,y,color,label){
  ctx.fillStyle=color;
  const cx=200+x*20, cy=200-y*20;
  ctx.beginPath(); ctx.arc(cx,cy,5,0,Math.PI*2); ctx.fill();
  if(label){ctx.fillText(label,cx+8,cy-8)}
}

function showExamples(){
  const canvas=document.getElementById('tfCanvas');
  const ctx=canvas.getContext('2d');
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawGrid(ctx,canvas.width,canvas.height);

  // original point
  drawPoint(ctx,1,1,'#3b82f6','Start (1,1)');
  // translated up 2
  drawPoint(ctx,1,3,'#ef4444','Translate up 2');
  // reflected over y-axis
  drawPoint(ctx,-1,1,'#22c55e','Reflect y-axis');
  // rotated 90° CCW about origin
  drawPoint(ctx,-1,1,'#f59e0b','Rotate 90°');
}

showExamples();
// ===== Visual Transformer logic =====
(function(){
  const svg = document.getElementById('tfSvg');
  if (!svg) return; // guard
  const gridG = document.getElementById('tfGrid');
  const axesG = document.getElementById('tfAxes');
  const dot = document.getElementById('tfDot');

  const SIZE = 440, M = 20, MIN = -10, MAX = 10, STEP = 1;
  const SCALE = (SIZE - 2*M) / (MAX - MIN);
  const toX = x => M + (x - MIN) * SCALE;
  const toY = y => SIZE - M - (y - MIN) * SCALE;

  // draw grid
  for (let v = MIN; v <= MAX; v += STEP) {
    const gx = document.createElementNS('http://www.w3.org/2000/svg','line');
    gx.setAttribute('x1', toX(v)); gx.setAttribute('y1', toY(MIN));
    gx.setAttribute('x2', toX(v)); gx.setAttribute('y2', toY(MAX));
    gridG.appendChild(gx);
    const gy = document.createElementNS('http://www.w3.org/2000/svg','line');
    gy.setAttribute('x1', toX(MIN)); gy.setAttribute('y1', toY(v));
    gy.setAttribute('x2', toX(MAX)); gy.setAttribute('y2', toY(v));
    gridG.appendChild(gy);
  }
  // axes at 0
  const ax = document.createElementNS('http://www.w3.org/2000/svg','line');
  ax.setAttribute('x1', toX(MIN)); ax.setAttribute('y1', toY(0));
  ax.setAttribute('x2', toX(MAX)); ax.setAttribute('y2', toY(0));
  axesG.appendChild(ax);
  const ay = document.createElementNS('http://www.w3.org/2000/svg','line');
  ay.setAttribute('x1', toX(0)); ay.setAttribute('y1', toY(MIN));
  ay.setAttribute('x2', toX(0)); ay.setAttribute('y2', toY(MAX));
  axesG.appendChild(ay);

  // state & controls
  let px = 1, py = 1;
  const tfPoint = () => { dot.setAttribute('cx', toX(px)); dot.setAttribute('cy', toY(py)); };
  tfPoint();

  const tfMag = document.getElementById('tfMag');
  const tfUp = document.getElementById('tfUp');
  const tfDown = document.getElementById('tfDown');
  const tfLeft = document.getElementById('tfLeft');
  const tfRight = document.getElementById('tfRight');
  const tfReflectX = document.getElementById('tfReflectX');
  const tfReflectY = document.getElementById('tfReflectY');
  const tfXVal = document.getElementById('tfXVal');
  const tfYVal = document.getElementById('tfYVal');
  const tfReflectXLine = document.getElementById('tfReflectXLine');
  const tfReflectYLine = document.getElementById('tfReflectYLine');
  const tfPivotX = document.getElementById('tfPivotX');
  const tfPivotY = document.getElementById('tfPivotY');
  const tfRotCCW = document.getElementById('tfRotCCW');
  const tfRotCW = document.getElementById('tfRotCW');
  const tfReset = document.getElementById('tfReset');

  function mag() { const m = parseInt(tfMag?.value,10); return Number.isFinite(m) ? Math.max(1, Math.min(10,m)) : 1; }

  tfUp?.addEventListener('click', ()=>{ py += mag(); tfPoint(); });
  tfDown?.addEventListener('click', ()=>{ py -= mag(); tfPoint(); });
  tfLeft?.addEventListener('click', ()=>{ px -= mag(); tfPoint(); });
  tfRight?.addEventListener('click', ()=>{ px += mag(); tfPoint(); });

  tfReflectX?.addEventListener('click', ()=>{ py = -py; tfPoint(); });
  tfReflectY?.addEventListener('click', ()=>{ px = -px; tfPoint(); });

  tfReflectXLine?.addEventListener('click', ()=>{ const a = parseFloat(tfXVal?.value)||0; px = 2*a - px; tfPoint(); });
  tfReflectYLine?.addEventListener('click', ()=>{ const b = parseFloat(tfYVal?.value)||0; py = 2*b - py; tfPoint(); });

  tfRotCCW?.addEventListener('click', ()=>{ const x0 = parseFloat(tfPivotX?.value)||0; const y0 = parseFloat(tfPivotY?.value)||0; const dx = px - x0, dy = py - y0; px = x0 - dy; py = y0 + dx; tfPoint(); });
  tfRotCW?.addEventListener('click', ()=>{ const x0 = parseFloat(tfPivotX?.value)||0; const y0 = parseFloat(tfPivotY?.value)||0; const dx = px - x0, dy = py - y0; px = x0 + dy; py = y0 - dx; tfPoint(); });

  tfReset?.addEventListener('click', ()=>{ px = 1; py = 1; tfPoint(); });
})();
</script>
</body>
</html>
