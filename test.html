<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Grade 6 PAT Generator</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
          onload="renderMathInElement(document.body, {delimiters:[{left:'$', right:'$', display:false},{left:'$$',right:'$$',display:true}]});"></script>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 900px; margin: 2rem auto; }
    .btn { padding: .6rem 1rem; border: 1px solid #ccc; border-radius: 8px; cursor:pointer; }
    .paper { padding: 1rem 1.2rem; border: 1px solid #ddd; border-radius: 12px; }
    .answers { margin-top: 1rem; background:#fafafa; border:1px dashed #ccc; padding: .8rem; }
    @media print {.controls {display:none}}
  </style>
</head>
<body>
  <div class="controls">
    <h1>Math 6 PAT – Part A (Sample)</h1>
    <label>Seed: <input id="seed" type="number" placeholder="(optional)"></label>
    <button class="btn" onclick="generate()">Generate</button>
    <button class="btn" onclick="window.print()">Print / Save PDF</button>
    <label style="margin-left:1rem"><input id="toggleAns" type="checkbox" onchange="toggleAnswers()"> Show answers</label>
  </div>

  <div id="exam" class="paper"></div>
  <div id="solutions" class="paper answers" style="display:none"></div>

<script>
/* Simple seeded PRNG so the same seed yields the same paper */
function mulberry32(a){return function(){var t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15, t|1);t^=t+Math.imul(t^t>>>7, t|61);return ((t^t>>>14)>>>0)/4294967296;}}
function randint(rng, lo, hi){return Math.floor(rng()*(hi-lo+1))+lo;}
function choice(rng, arr){return arr[Math.floor(rng()*arr.length)];}

function generate(){
  const seedInput = document.getElementById('seed').value;
  const seed = seedInput ? Number(seedInput) : Math.floor(Math.random()*1e9);
  const rng = mulberry32(seed);
  const problems = [];
  const answers = [];

  // Example problems mirroring your notebook’s style (add as many as you like)

  // 1) (a b) + (c d) style
  let a = randint(rng,11,99), b = randint(rng,100,999), c = randint(rng,11,99), d = randint(rng,100,999);
  problems.push(`What is $${a}$ $${b}+${c}$ $${d}$?`);
  answers.push(String((1000*a+b)+(1000*c+d)));

  // 2) dollars add
  a = randint(rng,1001,9999); b = randint(rng,1001,9999);
  problems.push(`What is $\\$${(a/100).toFixed(2)} + \\$${(b/100).toFixed(2)}$?`);
  answers.push(((a/100)+(b/100)).toFixed(2));

  // 3) ensure a/10 >= b/10
  do { a = randint(rng,101,999); b = randint(rng,101,999);} while(a<b);
  problems.push(`What is $${(a/10).toFixed(1)} - ${(b/10).toFixed(1)}$?`);
  answers.push(((a/10)-(b/10)).toFixed(2));

  // 4) multiplication
  a = randint(rng,11,99); b = randint(rng,11,99);
  problems.push(`What is $${a}\\times${b}$?`);
  answers.push(String(a*b));

  // 5) division with remainder==0
  do { a = randint(rng,111,999); b = randint(rng,3,9);} while(a % b !== 0);
  problems.push(`What is $${a}\\div${b}$?`);
  answers.push(String(a/b));

  // …continue porting your remaining generators…

  // Render exam
  const exam = document.getElementById('exam');
  exam.innerHTML = `<p><em>Seed:</em> ${seed}</p><ol>` + problems.map((q,i)=>`<li>${q}<br><strong>Answer:</strong> <span style="border-bottom:1px solid #000; padding:0 .4em; color:transparent">placeholder</span></li>`).join('') + `</ol>`;
  // Render solutions
  const sol = document.getElementById('solutions');
  sol.innerHTML = `<h3>Solutions (Seed ${seed})</h3><ol>` + answers.map(a=>`<li>${a}</li>`).join('') + `</ol>`;
  renderMathInElement(document.body); // re-run KaTeX
}
function toggleAnswers(){
  document.getElementById('solutions').style.display = document.getElementById('toggleAns').checked ? '' : 'none';
}
</script>
</body>
</html>
