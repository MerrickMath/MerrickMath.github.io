<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AP Statistics – Mr. Merrick</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;600&display=swap" rel="stylesheet">
  <style>
  body {
    margin: 0;
    font-family: 'Cormorant', serif;
    color: #606c71;
    line-height: 1.5;
    background: #f9fafc;
    font-size: 0.9rem;
  }
  header {
    text-align: center;
    padding: 1.2rem 1rem;
    background: linear-gradient(135deg,#1A2980,#26D0CE);
    color: white;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: clamp(22px, 3vw, 32px);
  }
  header p { margin-top: .3rem; font-size: 0.9rem; opacity: 0.9; }
  .contact-icon svg { fill: white; }

  main { max-width: 1000px; margin: 1.2rem auto; padding: 0 1rem; display: grid; gap: 1rem; }

  section, article {
    background: white;
    border-radius: 10px;
    padding: 0.8rem 1rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    border: 1px solid #e8eaf2;
    font-size: 0.9rem;
  }
  section a { color: #0AB9DC; text-decoration: none; font-weight: 600; }
  section a:hover { color: #1A2980; text-decoration: underline; }

  h2 {
    color: #514a9d;
    font-weight: 600;
    border-bottom: 2px solid #1A2980;
    padding-bottom: .2rem;
    margin: 0 0 .5rem;
    font-size: 1.1rem;
  }
  h3 { margin: .5rem 0 .3rem; color: #1A2980; font-weight: 600; font-size: 0.95rem; }

  ul { line-height: 1.4; margin: .3rem 0; padding-left: 1rem; font-size: 0.9rem; }
  li { margin: .2rem 0; }

  .quicklinks { display: grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap: .5rem; margin: .5rem 0; }
  .quicklinks a {
    display: inline-block;
    background: #e6f9fc;
    color: #1A2980 !important;
    padding: .4rem .6rem;
    border-radius: 6px;
    text-align: center;
    border: 1px solid #b8ecf5;
    font-size: .85rem;
    transition: background .2s ease, transform .15s ease;
  }
  .quicklinks a:hover { background: #d0f3fa; transform: translateY(-1px); }

  .exam-section { background: #B2D8CE; padding: .6rem .8rem; font-size: 0.9rem; }
  blockquote { color: #819198; font-style: italic; margin: .5rem 0; padding-left: .7rem; border-left: 3px solid #ccc; }
  .countdown { background: #fff3cd; border: 1px solid #ffe8a1; color: #7a5a00; padding: .6rem .9rem; border-radius: 8px; text-align: center; font-weight: 600; font-size: 1rem; box-shadow: 0 3px 6px rgba(0,0,0,0.05); margin: 0.5rem 0; }
  footer { margin-top: 1rem; text-align: center; color: #777; font-size: .75rem; }

  /* Collapsible details styling */
  details.materials {
    border: 1px solid #e8eaf2;
    border-radius: 8px;
    padding: .4rem .6rem;
    margin: .4rem 0;
    background: #fbfdff;
  }
  details.materials[open] { background: #f6fbff; }
  details.materials summary {
    cursor: pointer;
    list-style: none;
    font-weight: 700;
    color: #1A2980;
    display: flex;
    align-items: center;
    gap: .5rem;
  }
  details.materials summary::-webkit-details-marker { display: none; }
  .chev {
    display: inline-block;
    transition: transform .2s ease;
  }
  details[open] .chev { transform: rotate(90deg); }
  .sublist { margin: .4rem 0 .2rem 1.2rem; padding-left: .6rem; }

  .controls { display:flex; gap:.5rem; flex-wrap:wrap; margin: .4rem 0; }
  .controls button {
    background:#e6f9fc; border:1px solid #b8ecf5; color:#1A2980; border-radius:6px; padding:.35rem .6rem; font-weight:600; cursor:pointer;
  }
  .controls button:hover { background:#d0f3fa; }
  </style>
</head>
<body>
  <header>
    <h1>AP Statistics</h1>
    <div class="contact-icon">
      <a href="mailto:Merrick.fanning@renertschool.ca">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
          <path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/>
        </svg>
      </a>
    </div>
    <p>Mr. Merrick</p>
  </header>

  <main>
    <div class="quicklinks">
      <a href="https://apcentral.collegeboard.org/media/pdf/ap-statistics-course-at-a-glance.pdf" target="_blank">Course at a Glance</a>
      <a href="https://apcentral.collegeboard.org/courses/ap-statistics/exam" target="_blank">Exam Info</a>
      <a href="https://apcentral.collegeboard.org/courses/ap-statistics/exam/past-exam-questions" target="_blank">Past Exam Problems</a>
      <a href="https://apcentral.collegeboard.org/media/pdf/ap-statistics-revised-course-framework.pdf" target="_blank">Revised Framework (PDF)</a>
    </div>

    <div class="countdown" aria-live="polite">
      <span id="exam-countdown">—</span>
    </div>

    <div style="border-left:4px solid #2f855a;background:#f6fffa;padding:.6rem .8rem;border-radius:6px;font-size:0.9rem">
      <h2>The Exam</h2>
      <p><strong>AP Statistics Exam:</strong> <u>Thursday, May 7, 2026 at 12:00 PM local time</u>.</p>
      <p><a href="https://apstudents.collegeboard.org/about-ap-scores/score-distributions/ap-statistics" target="_blank">Exam Score Distributions</a></p>
      <h3>What to Expect on Exam Day</h3>
      <ul>
        <li><strong>Section I:</strong> 40 multiple-choice questions — 90 minutes (50% of score)</li>
        <li><strong>Section II:</strong> 6 free-response questions (including the Investigative Task) — 90 minutes (50% of score)</li>
        <li>Bring an approved calculator and extra pencils.</li>
      </ul>

      <blockquote>
        Note: The <strong>revised</strong> AP Statistics framework uses <strong>5 units</strong>.
        This page maps our existing materials into that new structure.
      </blockquote>
    </div>

    <section>
      <h2>Timeline & Homework</h2>
      <ul>
        <li><strong>Unit 1 (Revised):</strong> Exploring One-Variable Data and Collecting Data</li>
        <li><strong>Unit 2 (Revised):</strong> Probability, Random Variables, and Probability Distributions</li>
        <li><strong>Unit 3 (Revised):</strong> Inference for Categorical Data: Proportions</li>
        <li><strong>Unit 4 (Revised):</strong> Inference for Quantitative Data: Means</li>
        <li><strong>Unit 5 (Revised):</strong> Regression Analysis</li>
      </ul>
    </section>

    <section>
      <h2>Tests/Activites/Dates</h2>
      <ul>
        <li><strong>Unit 1 (Revised):</strong> —</li>
        <li><strong>Unit 2 (Revised):</strong> —</li>
        <li><strong>Unit 3 (Revised):</strong> —</li>
        <li><strong>Unit 4 (Revised):</strong> —</li>
        <li><strong>Unit 5 (Revised):</strong> —</li>
      </ul>
    </section>

    <section>
      <h2>In-Class Materials</h2>

      <div class="controls" aria-label="materials controls">
        <button type="button" id="expand-all">Expand all</button>
        <button type="button" id="collapse-all">Collapse all</button>
      </div>

      <details class="materials">
        <summary><span class="chev">▶</span> Course Outline</summary>
        <ul class="sublist">
          <li><a href="https://merrickmath.github.io/APSTAT/materials/D4Outline.pdf">Course Outline (PDF)</a></li>
        </ul>
      </details>

      <details class="materials">
        <summary><span class="chev">▶</span> Puzzles and Special Events</summary>
        <ul class="sublist">
          <li><a href="https://renertmath.github.io/Challenges/12Days2025.html">12 Days of ChrisMATH!</a></li>
          <li><strong>Locked Out - Jurassic Park:</strong>
             <ul>
               <li><a href="https://merrickmath.github.io/APSTAT/materials/Extra/JurassicPuzzlePack.pdf">Puzzle Pack</a></li>
               <li><a href="https://merrickmath.github.io/APSTAT/materials/Extra/JurassicTabloids.pdf">Tabloids</a></li>
             </ul>
          </li>
        </ul>
      </details>

      <!-- =========================================================
           REVISED UNIT 1: Exploring One-Variable Data + Collecting Data
           (maps old Unit 1 + old Unit 3)
           ========================================================= -->
      <details class="materials">
        <summary><span class="chev">▶</span> Unit 1 (Revised): Exploring One-Variable Data and Collecting Data</summary>
        <ul class="sublist">
          <!-- Old Unit 1 -->
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit1/Slides.pdf">Slides (Old Unit 1)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit1QuickNotes.pdf">Quick Notes (Old Unit 1)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit1/Describe.pdf">Describing Distributions</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit1/DescribeSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit1/Outliers.pdf">Identifying Outliers</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit1/OutliersSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit1/Estimate.pdf">Estimating Statistics</a></li>
          <li><a href="https://merrickmath.github.io/Mentalmath/Statisticestimate.html">Estimating Statistics Practice App</a></li>

          <!-- Old Unit 3 (Collecting Data) -->
          <li style="margin-top:.35rem"><strong>Collecting Data (Old Unit 3):</strong></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit3/Slides.pdf">Slides (Old Unit 3)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit3/QuickNotes.pdf">Quick Notes (Old Unit 3)</a></li>
        </ul>
      </details>

      <!-- =========================================================
           REVISED UNIT 2: Probability + RVs + Distributions (+ Sampling Dist bridge)
           (maps old Unit 4 + old Unit 5)
           ========================================================= -->
      <details class="materials">
        <summary><span class="chev">▶</span> Unit 2 (Revised): Probability, Random Variables, and Probability Distributions</summary>
        <ul class="sublist">
          <!-- Old Unit 4 (Probability) -->
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/Slides.pdf">Slides (Old Unit 4)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/QuickNotes.pdf">Quick Notes (Old Unit 4)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/SetsProblems.pdf">Sets Problems</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit4/SetsProblemsSoln.pdf">Solutions</a>
          (Society of Actuaries: <a href="https://www.soa.org/globalassets/assets/Files/Edu/edu-exam-p-sample-quest.pdf">Exam P</a>)</li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/PenProb.pdf">Penguin Probability</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit4/PenProbSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/Math30Review.pdf">Math 30 Review</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit4/Math30ReviewSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/PracticeDec12.pdf">Practice From Decemeber 12</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit4/PracticeDec12Soln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit4/MorePractice.pdf">Practice From Decemeber 15</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit4/MorePracticeSoln.pdf">Solutions</a></li>

          <li>
            Videos:
            <ul>
              <li><a href="https://www.youtube.com/watch?v=HZGCoVF3YvM&list=PLIhj5_pQwhMQfGZNQZREjDdJRt0t0sn51&index=6">Bayes Theorem (3 Blue 1 Brown)</a></li>
              <li><a href="https://www.youtube.com/watch?v=lG4VkPoG3ko&list=PLIhj5_pQwhMQfGZNQZREjDdJRt0t0sn51&index=7">Medical Test Paradox (3 Blue 1 Brown)</a></li>
              <li><a href="https://www.youtube.com/watch?v=zeJD6dqJ5lo&list=PLIhj5_pQwhMQfGZNQZREjDdJRt0t0sn51&index=1">Central Limit Theorem (3 Blue 1 Brown)</a></li>
              <li><a href="https://www.youtube.com/watch?v=KZeIEiBrT_w">Markov Chains (Veritasium)</a></li>
              <li><a href="https://www.youtube.com/watch?v=HBluLfX2F_k">Power Laws (Veritasium)</a></li>
              <li><a href="https://www.youtube.com/watch?v=8Ko3TdPy0TU&t=617s">Speed Running Minecraft - the Binomial Distribtion (Stand Up Maths)</a></li>
              <li><a href="https://www.youtube.com/watch?v=8idr1WZ1A7Q&list=PL4cNQ1YkG5WhQGmPnRe4vDUImh_nviriy">Binomial Distributions (3 Blue 1 Brown)</a></li>
              <li><a href="https://www.youtube.com/watch?v=cy8r7WSuT1I&list=PL4cNQ1YkG5WhQGmPnRe4vDUImh_nviriy&index=6">Properties of Normal Distributions (3 Blue 1 Brown)</a></li>
              <li><a href="https://www.youtube.com/watch?v=kZTKuMBJP7Y">Lotteries and Expected Value</a></li>
            </ul>
          </li>

          <!-- Old Unit 5 (Sampling Distributions as a bridge into inference) -->
          <li style="margin-top:.35rem"><strong>Sampling Distributions (Bridge from Old Unit 5):</strong></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5.pdf">Slides (Old Unit 5)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5QuickNotes.pdf">Quick Notes (Old Unit 5)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/SampleDistP.pdf">Sampling Distribution for sample proportion</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/SampleDistPSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/SampleDistMu.pdf">Sampling Distribution for sample mean</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/SampleDistMuSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/DifferenceProp.pdf">Sampling Distribution for difference of sample proportions</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/DifferencePropSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/DifferenceMean.pdf">Sampling Distribution for difference of sample means</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/DifferenceMeanSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/StandardErrors.pdf">When parameters are unknown</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/StandardErrorsSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit5/Practice.pdf">Extra Practice</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit5/PracticeSoln.pdf">Solutions</a></li>
          <li>
            Videos:
            <ul>
              <li><a href="https://www.youtube.com/watch?v=zeJD6dqJ5lo&list=PL4cNQ1YkG5WhQGmPnRe4vDUImh_nviriy&index=5">The Central Limit Theorem (3 Blue 1 Brown)</a></li>
            </ul>
          </li>
        </ul>
      </details>

      <!-- =========================================================
           REVISED UNIT 3: Inference for Categorical Data (Proportions)
           (maps proportion parts of old Unit 6)
           ========================================================= -->
      <details class="materials">
        <summary><span class="chev">▶</span> Unit 3 (Revised): Inference for Categorical Data — Proportions</summary>
        <ul class="sublist">
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6.pdf">Slides (Old Unit 6)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6QuickNotes.pdf">Quick Notes (Old Unit 6)</a></li>

          <li><strong>Confidence Intervals (Proportions)</strong>
            <ul>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/ZIntervalP.pdf">One-Sample Z-Intervals Practice</a>
              | <a href="https://merrickmath.github.io/APSTAT/materials/Unit6/ZIntervalPSoln.pdf">Solutions</a></li>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/EarthWater.pdf">Estimating the Proportion of Water on Earth</a></li>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/RequiredSampleSizeP.pdf">Required Sample Size for a Margin of Error</a>
              | <a href="https://merrickmath.github.io/APSTAT/materials/Unit6/RequiredSampleSizePSoln.pdf">Solutions</a></li>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/ConfidenceMeaning.pdf">The Meaning of Confidence</a></li>
            </ul>
          </li>

          <li><strong>Hypothesis Testing (Proportions / Foundations)</strong>
            <ul>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/TastingTea.pdf">The Lady Tasting Tea Hypothesis Testing Intro</a>
              | <a href="https://merrickmath.github.io/APSTAT/materials/Unit6/TastingTeaSoln.pdf">Solutions</a></li>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/InferenceSteps.pdf">Steps for Statistical Inference</a></li>
              <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit6/Errors.pdf">Errors and Power</a>
              | <a href="https://merrickmath.github.io/APSTAT/materials/Unit6/ErrorsSoln.pdf">Solutions</a>
              <em>(optional enrichment)</em></li>
            </ul>
          </li>

          <li><a href="https://mcspeedrun.com/wp-content/uploads/2025/08/dream.pdf">Minecraft Speedrunning Article (Optional)</a></li>
        </ul>
      </details>

      <!-- =========================================================
           REVISED UNIT 4: Inference for Quantitative Data (Means)
           (maps old Unit 7 + mean-related inference from old Units 8/9 as needed)
           ========================================================= -->
      <details class="materials">
        <summary><span class="chev">▶</span> Unit 4 (Revised): Inference for Quantitative Data — Means</summary>
        <ul class="sublist">
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit7.pdf">Slides (Old Unit 7)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit7QuickNotes.pdf">Quick Notes (Old Unit 7)</a></li>

          <li style="margin-top:.35rem"><strong>Legacy Unit 8/9 materials (as needed for t-procedures):</strong></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit8.pdf">Slides (Old Unit 8)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit8QuickNotes.pdf">Quick Notes (Old Unit 8)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit9.pdf">Slides (Old Unit 9)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit9QuickNotes.pdf">Quick Notes (Old Unit 9)</a></li>
        </ul>
      </details>

      <!-- =========================================================
           REVISED UNIT 5: Regression Analysis
           (maps old Unit 2 + any inference-in-context from old Unit 9 as desired)
           ========================================================= -->
      <details class="materials">
        <summary><span class="chev">▶</span> Unit 5 (Revised): Regression Analysis</summary>
        <ul class="sublist">
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2/Slides.pdf">Slides (Old Unit 2)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2QuickNotes.pdf">Quick Notes (Old Unit 2)</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2/VarianceCovariance.pdf">Variance Covariance and Correlation</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit2/VarianceCovarianceSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2/LeastSquares.pdf">Least Squares Regression and R-squared</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit2/LeastSquaresSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2/ExtraPractice.pdf">Extra Practice</a>
          | <a href="https://merrickmath.github.io/APSTAT/materials/Unit2/ExtraPracticeSoln.pdf">Solutions</a></li>
          <li><a href="https://merrickmath.github.io/APSTAT/materials/Unit2/SlideExamples.pdf">Practice From Slides</a></li>
        </ul>
      </details>

    </section>

    <section>
      <h2>Class Resources</h2>
      <ul>
        <li><a href="https://merrickmath.github.io/APSTAT/materials/PastExamsByUnit.html">Past Exams Problems Tagged By Unit</a></li>
        <li><a href="https://drive.google.com/drive/folders/1SAwh7_BTf8Mkrvddb032jgdsNS6mII9f?usp=sharing">Class Datasets</a></li>
        <li><a href="https://www.jbstatistics.com">JBStatistics</a></li>
        <li><a href="https://www.khanacademy.org/math/ap-statistics">Khan Academy: AP Statistics</a></li>
        <li><a href="https://www.stapplet.com">Statistics Apps (Stapplet)</a></li>
        <li><a href="https://www.r-project.org">R download</a></li>
        <li><a href="https://www.rstudio.com/products/rstudio/download/">R Studio download</a></li>
      </ul>
    </section>

    <footer class="site-footer">
      <small>Last updated: <span id="last-updated">—</span></small>
    </footer>
  </main>

  <script>
    // Countdown to exam: Thursday, May 7, 2026 at 12:00 PM local time
    (function(){
      const el = document.getElementById('exam-countdown');
      if(!el) return;
      const target = new Date(2026, 4, 7, 12, 0, 0);
      const MS_PER_DAY = 24 * 60 * 60 * 1000;

      function render(){
        const now = new Date();
        const diff = target - now;
        if (diff <= 0) {
          el.textContent = '0 Days until the exam';
          return;
        }
        const days = Math.ceil(diff / MS_PER_DAY);
        el.textContent = days + ' Days until the exam';
      }

      render();
      setInterval(render, 60 * 60 * 1000);
    })();

    // Last updated from GitHub commit
    (async function () {
      const target = document.getElementById('last-updated') || document.querySelector('#last-updated span');
      if (!target) return;

      const OWNER  = 'merrickmath';
      const REPO   = 'Div34Math';
      const BRANCH = '';
      const siteBase = '/Div34Math/';

      let path = window.location.pathname;
      if (siteBase && path.startsWith(siteBase)) path = path.slice(siteBase.length);
      path = path.replace(/^\/+/, '');
      if (!path || path.endsWith('/')) path += 'index.html';

      const commitURL = (filePath) => {
        const u = new URL(`https://api.github.com/repos/${OWNER}/${REPO}/commits`);
        u.searchParams.set('path', filePath);
        u.searchParams.set('per_page', '1');
        if (BRANCH) u.searchParams.set('sha', BRANCH);
        return u.toString();
      };

      const fmt = (iso) => {
        const d = new Date(iso);
        const opts = { month: 'short', day: '2-digit', year: 'numeric' };
        return { short: d.toLocaleDateString(undefined, opts), full: d.toLocaleString() };
      };

      try {
        let res = await fetch(commitURL(path), { headers: { 'Accept': 'application/vnd.github+json' } });
        if (!res.ok) throw new Error('GitHub API error');
        const commits = await res.json();
        let iso = commits?.[0]?.commit?.committer?.date || commits?.[0]?.commit?.author?.date;

        if (!iso) {
          const repoRes = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}`);
          if (repoRes.ok) {
            const repo = await repoRes.json();
            iso = repo?.pushed_at || null;
          }
        }

        if (!iso) iso = document.lastModified;
        const { short, full } = fmt(iso);
        target.textContent = short;
        target.title = `Last update source time: ${full}`;
      } catch (err) {
        const { short, full } = fmt(document.lastModified);
        target.textContent = short;
        target.title = `Fallback from document.lastModified (${full})`;
      }
    })();

    // Expand / Collapse all controls for details elements
    (function(){
      const expandBtn = document.getElementById('expand-all');
      const collapseBtn = document.getElementById('collapse-all');
      const allDetails = () => Array.from(document.querySelectorAll('details.materials'));
      if (!expandBtn || !collapseBtn) return;

      expandBtn.addEventListener('click', () => allDetails().forEach(d => d.open = true));
      collapseBtn.addEventListener('click', () => allDetails().forEach(d => d.open = false));
    })();
  </script>

</body>
</html>
