<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trashketball Game</title>
  <style>
    :root {
      --bg: #fff9f3;
      --card: #ffffff;
      --text: #232323;
      --muted: #565656;
      --accent: #ff7a00; /* bright orange */
      --accent-2: #ff9a3d;
      --accent-3: #ffb870;
      --ring: rgba(255, 122, 0, 0.25);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% -10%, #fff3e6 0%, transparent 60%), var(--bg);
      color: var(--text);
    }
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px 18px 60px;
    }
    header {
      display: flex;
      flex-direction: column;
      align-items: center;   /* centers both title and toolbar */
      gap: 12px;             /* space between title and toolbar */
      margin-bottom: 18px;
    }


    .title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 0.3px;
    }

    .toolbar {
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center;
    }
    .segmented {
      background: #fff; border: 2px solid var(--accent-2); border-radius: 16px; padding: 4px; display: inline-flex; gap: 4px;
      box-shadow: 0 6px 16px rgba(255,122,0,0.12);
    }
    .segmented button {
      border: 0; background: transparent; padding: 10px 14px; border-radius: 10px; font-weight: 700; color: var(--muted); cursor: pointer;
      transition: transform 0.05s ease, background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    }
    .segmented button[aria-pressed="true"] {
      background: linear-gradient(180deg, var(--accent-2), var(--accent)); color: #fff; box-shadow: 0 6px 14px rgba(255,122,0,0.25);
    }
    .segmented button:active { transform: translateY(1px); }

    .actions { display: flex; gap: 10px; margin-left: auto; }
    .btn {
      appearance: none; border: 0; cursor: pointer; font-weight: 800; letter-spacing: 0.2px;
      padding: 12px 16px; border-radius: 14px; background: linear-gradient(180deg, var(--accent-3), var(--accent)); color: #fff;
      box-shadow: 0 10px 24px rgba(255,122,0,0.25), 0 2px 0 0 rgba(0,0,0,0.05) inset;
      transition: transform 0.06s ease, filter 0.2s ease, box-shadow 0.2s ease;
    }
    .btn.secondary { background: #fff; color: var(--accent); border: 2px solid var(--accent); box-shadow: 0 6px 16px rgba(255,122,0,0.12); }
    .btn:active { transform: translateY(1px); }

    .grid {
      margin-top: 18px;
      display: grid; gap: 16px;
      grid-template-columns: repeat(12, 1fr);
    }
    .card {
      grid-column: span 4;
      background: var(--card);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.06), 0 0 0 3px var(--ring);
      display: flex; flex-direction: column; gap: 10px; min-height: 150px;
      position: relative;
    }
    @media (max-width: 900px) { .card { grid-column: span 6; } }
    @media (max-width: 620px) { .card { grid-column: span 12; } }

    .q {
      font-size: 20px;   /* make questions larger */
      font-weight: 700;
      line-height: 1.3;
    }
    .a {
      font-size: 20px;   /* make answers larger */
      color: var(--muted);
      font-weight: 700;
      opacity: 0;
      transform: translateY(4px);
      transition: all 0.25s ease;
    }

    .dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      background: var(--accent); /* bright orange */
      border-radius: 50%;
    }
    
    .card.revealed .a { opacity: 1; transform: translateY(0); color: #126e12; }

    .badge {
      position: absolute; top: 10px; right: 10px; background: var(--accent); color: #fff; font-size: 12px; font-weight: 800; padding: 6px 10px; border-radius: 999px; box-shadow: 0 6px 14px rgba(255,122,0,0.3);
    }

    .footer-note { margin-top: 14px; color: #6b6b6b; font-size: 13px; }
    .hint { font-size: 13px; color: #888; }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
          onload="renderMathInElement(document.body);"></script>

</head>
<body>
  <div class="container">
    <header>
      <div class="title" aria-label="Trashketball Game">
        <span class="dot"></span>
        Trashketball
        <span class="dot"></span>
      </div>

      <div class="toolbar" role="toolbar" aria-label="Game Controls">
        <div class="segmented" role="group" aria-label="Problem Type">
          <button class="seg" data-type="integer" aria-pressed="true">Integer operations</button>
          <button class="seg" data-type="fdp" aria-pressed="false">Fractions • Decimals • %</button>
          <button class="seg" data-type="order" aria-pressed="false">Order of Operations</button>
          <button class="seg" data-type="algebra" aria-pressed="false">Algebra</button>
        </div>
        <div class="actions">
          <button id="moreBtn" class="btn" title="Get three new problems">More problems</button>
          <button id="revealBtn" class="btn secondary" title="Show or hide all answers" aria-pressed="false">Show answers</button>
        </div>
      </div>
    </header>

    <main class="grid" id="grid" aria-live="polite"></main>

    <p class="footer-note">
      Tip: In class play, set a 30-second timer and solve all three. Then reveal answers and take your shot! 
    </p>
  </div>

  <script>
    // Utility helpers
    const randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min; // inclusive
    const choice = (arr) => arr[randInt(0, arr.length - 1)];
    const gcd = (a, b) => { a = Math.abs(a); b = Math.abs(b); while (b) [a, b] = [b, a % b]; return a; };
    const simplifyFrac = (n, d) => { const g = gcd(n, d); const sN = n / g; const sD = d / g; return sD === 1 ? `${sN}` : `${sN}/${sD}`; };

    function genIntegerOps() {
      const ops = ['+', '-', '×', '÷'];
      const out = [];
    
      // helper to wrap negatives in ( )
      const fmt = (n) => n < 0 ? `(${n})` : String(n);
    
      while (out.length < 3) {
        const op = choice(ops);
        let a = randInt(-12, 12), b = randInt(-12, 12);
    
        if (op === '÷') {
          // ensure integer division result
          b = choice([ -12,-9,-8,-6,-4,-3,-2,2,3,4,6,8,9,12 ]);
          const q = randInt(-10, 10);
          a = b * q;
        }
    
        const expr =
          op === '×' ? `${fmt(a)} × ${fmt(b)}` :
          op === '÷' ? `${fmt(a)} ÷ ${fmt(b)}` :
          `${fmt(a)} ${op} ${fmt(b)}`;
    
        let ans;
        switch (op) {
          case '+': ans = a + b; break;
          case '-': ans = a - b; break;
          case '×': ans = a * b; break;
          case '÷': ans = a / b; break;
        }
        out.push({ q: expr + ' =', a: String(ans) });
      }
      return out;
    }


    function genFDP() {
      const out = [];
      const easyDenoms = [2,4,5,10,20,25,50,100];
    
      // 1) Fraction → percent (whole % thanks to easyDenoms)
      const d1 = choice(easyDenoms);
      const n1 = randInt(1, d1 - 1);
      const p1 = (n1 * 100) / d1; // integer
      out.push({ q: `Convert ${n1}/${d1} to a percent`, a: `${p1}%` });
    
      // 2) Percent of a number (whole-number % chosen at random)
      const p = randInt(1, 100);
      const base = choice([40,50,60,80,100,120,160,200,240,300,400,500,600,800]);
      const val = +(base * (p / 100)).toFixed(2);
      out.push({ q: `What is ${p}% of ${base}?`, a: String(val) });
    
      // 3) Fraction +/- with like OR unlike denominators
      //    (50% chance like-denom, 50% unlike-denom)
      const denChoices = [2,3,4,5,6,8,9,10,12];
      const useLike = Math.random() < 0.5;
    
      const dA = choice(denChoices);
      const dB = useLike ? dA : choice(denChoices.filter(d => d !== dA));
    
      const nA = randInt(1, dA - 1);
      const nB = randInt(1, dB - 1);
      const op = choice(['+', '-']);
    
      // Compute result
      const g = (a,b) => { a = Math.abs(a); b = Math.abs(b); while (b) [a,b] = [b, a % b]; return a; };
      const lcm = (a,b) => Math.abs(a*b) / g(a,b);
    
      const L = lcm(dA, dB);
      const numA = nA * (L / dA);
      const numB = nB * (L / dB);
      let num = op === '+' ? (numA + numB) : (numA - numB);
      let sign = '';
      if (num < 0) { sign = '-'; num = Math.abs(num); }
    
      // Simplify and convert to mixed number if needed
      const whole = Math.floor(num / L);
      const rem = num % L;
      const simp = rem ? simplifyFrac(rem, L) : '0';
    
      let answer;
      if (whole && rem) answer = `${sign}${whole} ${simp}`;
      else if (whole && !rem) answer = `${sign}${whole}`;
      else if (!whole && rem) answer = `${sign}${simp}`;
      else answer = '0';
    
      out.push({ q: `${nA}/${dA} ${op} ${nB}/${dB} =`, a: answer });
    
      return out;
    }



    function genOrderOfOps() {
      const out = [];
      const fmt = (n) => n < 0 ? `(${n})` : String(n);
    
      // A) a + b × c
      let a = randInt(-9,9), b = randInt(-9,9), c = randInt(-9,9);
      out.push({ q: `${fmt(a)} + ${fmt(b)} × ${fmt(c)}`, a: String(a + b*c) });
    
      // B) (a + b) × c − d
      a = randInt(-9,9); b = randInt(-9,9); c = randInt(-5,5); let d = randInt(-9,9);
      out.push({ q: `(${fmt(a)} + ${fmt(b)}) × ${fmt(c)} − ${fmt(d)}`, a: String((a+b)*c - d) });
    
      // C) a ÷ b + (c − d)
      b = choice([ -6,-4,-3,-2,2,3,4,6 ]);
      a = b * randInt(-6,6);
      c = randInt(-9,9);
      d = randInt(-9,9);
      out.push({ q: `${fmt(a)} ÷ ${fmt(b)} + (${fmt(c)} − ${fmt(d)})`, a: String(a/b + (c-d)) });
    
      return out;
    }


    function genAlgebra() {
      const out = [];
      // ax + b = c with nice integer x
      for (let i=0;i<3;i++) {
        let a = choice([ -6,-5,-4,-3,3,4,5,6 ]);
        let x = randInt(-9,9);
        let b = randInt(-9,9);
        const c = a*x + b;
        out.push({ q: `${a}x + ${b} = ${c}`, a: `x = ${x}` });
      }
      return out;
    }

    function generate(type) {
      switch (type) {
        case 'integer': return genIntegerOps();
        case 'fdp': return genFDP();
        case 'order': return genOrderOfOps();
        case 'algebra': return genAlgebra();
        default: return genIntegerOps();
      }
    }

    const grid = document.getElementById('grid');
    const moreBtn = document.getElementById('moreBtn');
    const revealBtn = document.getElementById('revealBtn');

    function render(cards) {
      grid.innerHTML = '';
      cards.forEach((c, i) => {
        const el = document.createElement('section');
        el.className = 'card';
        el.innerHTML = `
          <div class="badge">Q${i+1}</div>
          <div class="q">${c.q}</div>
          <div class="a" aria-hidden="true">Answer: ${c.a}</div>
        `;
        grid.appendChild(el);
      });
    }

    function setType(type) {
      document.querySelectorAll('.seg').forEach(btn => btn.setAttribute('aria-pressed', String(btn.dataset.type === type)));
      currentType = type;
      currentCards = generate(currentType);
      revealed = false;
      revealBtn.textContent = 'Show answers';
      revealBtn.setAttribute('aria-pressed', 'false');
      render(currentCards);
    }

    function toggleReveal() {
      revealed = !revealed;
      revealBtn.textContent = revealed ? 'Hide answers' : 'Show answers';
      revealBtn.setAttribute('aria-pressed', String(revealed));
      document.querySelectorAll('.card').forEach(card => card.classList.toggle('revealed', revealed));
    }

    let currentType = 'integer';
    let currentCards = [];
    let revealed = false;

    // init
    setType(currentType);

    document.querySelectorAll('.seg').forEach(btn => {
      btn.addEventListener('click', () => setType(btn.dataset.type));
    });

    moreBtn.addEventListener('click', () => {
      currentCards = generate(currentType);
      revealed = false;
      revealBtn.textContent = 'Show answers';
      revealBtn.setAttribute('aria-pressed', 'false');
      render(currentCards);
    });

    revealBtn.addEventListener('click', toggleReveal);

    // Keyboard shortcuts: A = toggle answers, M = more
    window.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'a') { toggleReveal(); }
      if (e.key.toLowerCase() === 'm') { moreBtn.click(); }
    });
  </script>
</body>
</html>
